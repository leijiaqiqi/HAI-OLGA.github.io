<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Learning</title>
  <meta name="description" content="Learning resources: ChatGPT, NotebookLM, FlowiseAI." />
  <link rel="stylesheet" href="/OLGA.github.io/assets/css/style.css" />
</head>

<body>
  <a class="skip-link" href="#content">Skip to content</a>

  <header class="site-header">
    <div class="container">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true">ðŸ¤–</div>
        <div class="brand-text">
          <div class="brand-title">Learning</div>
          <div class="brand-subtitle">Tools and guided workflows</div>
        </div>
      </div>

      <nav class="nav">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link" href="learning.html" aria-current="page">Learning</a>
        <a class="nav-link" href="grading.html">Grading</a>
      </nav>
    </div>
  </header>

  <main id="content" class="container">
    <section class="section">
      <h1>Learning Tools</h1>
      <p class="lead">
        Choose a tool below. 
      </p>

      <div class="grid-3">
        <!-- 1) Custom GPT -->
        <article class="card">
          <div class="card-header">
            <h2>1) ChatGPT</h2>
            <p>
              A tailored assistant for the course materials. 
            </p>
          </div>
          <div class="card-footer">
            <a class="button" href="https://chatgpt.com/g/g-697a6f16b690819191fb9787e666b563-iems-313" target="_blank" rel="noopener noreferrer">
              Open Custom GPT â†’
            </a>
          </div>
        </article>

        <!-- 2) NotebookLM -->
        <article class="card">
          <div class="card-header">
            <h2>2) NotebookLM</h2>
            <p>
              A note companion for reading, synthesis, and Q&A over the course materials.
            </p>
          </div>
          <div class="card-footer">
            <a class="button" href="https://notebooklm.google.com/notebook/73e6d71c-a360-4d4a-b2a7-b6c9cc6d2dcb" target="_blank" rel="noopener noreferrer">
              Open NotebookLM â†’
            </a>
          </div>
        </article>

        <!-- 3) FlowiseAI -->
        <article class="card">
          <div class="card-header">
            <h2>3) Embedding Model</h2>
            <p>
              For now itâ€™s a placeholder for the better design.
            </p>
          </div>
          <div class="card-footer">
            <button class="button button-secondary" id="flowise-launch" type="button">
                Open Chatting Bot â†’
            </button>
          </div>
        </article>
      </div>
    </section>
    

    <section class="section" id="flowise-notes">
      <h2>Notes: </h2>
      <div class="note">
        <p><strong>Update for the chapters: </strong></p>
        <ul>
          <li>Chapter 1 is setting up at the beginning of the quarter.</li>
          <li>Once a chapter is completed, update the GPT and notebookLM with the new chapter. </li>
          <li>Prevent the students from asking for the assignment solutions by adding instructions to GPT. But NotebookLM cannot do that.  </li>
          <li>At the end of the quarter, all chapters include. </li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-row">
      <div>Â© <span id="year"></span> IEMS 313 </div>
      <div class="muted">Learning section</div>
    </div>
  </footer>

  <script src="/OLGA.github.io/assets/js/main.js"></script>

  <script type="module">
  const FLOWISE_CHATFLOW_ID = "17a9c1ac-2447-4b7b-82e9-2388f00b9481";
  const FLOWISE_API_HOST = "https://cloud.flowiseai.com";

  let flowiseInitialized = false;

  function tryOpenExistingWidget() {
    const el = document.querySelector("flowise-chatbot");
    const root = el?.shadowRoot;
    if (!root) return false;

    // The widget exposes parts; the launcher button is usually inside the shadow root.
    const launcher = root.querySelector("div[part='button'], button, .chatbot-button");
    if (launcher) {
      launcher.click();
      return true;
    }
    return false;
  }

  async function openFlowiseChat() {
    // If already initialized, just re-open it
    if (flowiseInitialized) {
      if (!tryOpenExistingWidget()) {
        // fallback: scroll to notes section if widget structure changes
        location.hash = "#flowise-notes";
      }
      return;
    }

    // Lazy-load + init ONLY on first click
    const { default: Chatbot } = await import(
      "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
    );

    Chatbot.init({
      chatflowid: FLOWISE_CHATFLOW_ID,
      apiHost: FLOWISE_API_HOST,
      theme: {
        button: {
          // Keep the widget from auto-opening on page load,
          // but once initialized (on click), open immediately:
          autoWindowOpen: {
            autoOpen: true,
            openDelay: 0,
            autoOpenOnMobile: true
          }
        }
      }
    });

    flowiseInitialized = true;

    // In some browsers it needs a tick before we can programmatically open it
    setTimeout(() => tryOpenExistingWidget(), 50);
  }

  document.getElementById("flowise-launch")?.addEventListener("click", (e) => {
    e.preventDefault();
    openFlowiseChat();
  });
</script>

</body>
</html>
